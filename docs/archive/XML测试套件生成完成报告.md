# XML æµ‹è¯•å¥—ä»¶ç”Ÿæˆå®ŒæˆæŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2026-01-26  
**çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆ

---

## ğŸ“Š ç”Ÿæˆç»Ÿè®¡

- âœ… **æµ‹è¯•å¥—ä»¶æ•°é‡**: 39 ä¸ª
- âœ… **æµ‹è¯•æ–¹æ³•æ€»æ•°**: 279 ä¸ª
- âœ… **æµ‹è¯•æ•°æ®**: æ¯ä¸ªå¥—ä»¶ 4 æ¡ï¼ˆID: 1001-1004ï¼‰

---

## ğŸ¯ ç”Ÿæˆè§„èŒƒ

### 1. Controller ç‰¹ç‚¹

#### âœ… åŒ…å«å®Œæ•´çš„æµ‹è¯•æ•°æ®ç¤ºä¾‹

```java
@GetMapping("/test1_selectAllTemplate")
public Object test1_selectAllTemplate() {
    System.out.println("æµ‹è¯•: selectAllTemplate");
    try {
        // TODO: æ ¹æ®å®é™…æƒ…å†µè®¾ç½®å‚æ•°
        EventTemplate entity = new EventTemplate();
        // entity.setId(1001L);
        // entity.setIncidentName("æµ‹è¯•æ•°æ®");
        // entity.setEnable(true);
        // entity.setUpdateTime(LocalDateTime.now());
        
        Object result = mapper.selectAllTemplate(/* å‚æ•° */);
        System.out.println("ç»“æœ: " + result);
        return result;
    } catch (Exception e) {
        e.printStackTrace();
        return "ERROR: " + e.getMessage();
    }
}
```

#### âœ… å…³é”®ç‰¹ç‚¹

- æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ **GET è¯·æ±‚**
- å‚æ•°éƒ½**å†™æ­»åœ¨ Controller ä¸­**
- æä¾›äº†**å®Œæ•´çš„æµ‹è¯•æ•°æ®ç¤ºä¾‹**ï¼ˆè™½ç„¶æ˜¯æ³¨é‡Šå½¢å¼ï¼‰
- UPDATE æ–¹æ³•**æ— è¿”å›å€¼**
- æµ‹è¯•æ–¹æ³•æ•° = XML ä¸­çš„æ–¹æ³•æ•°ï¼ˆä¸é‡å¤ï¼‰

---

### 2. test_data.sql ç‰¹ç‚¹

#### âœ… æ•°æ®é€‚ä¸­ä¸”ä¸°å¯Œ

```sql
-- æµ‹è¯•æ•°æ®1
(1001, 'æµ‹è¯•EventTemplate_1', 'æµ‹è¯•æ•°æ®1', ..., true, ...),

-- æµ‹è¯•æ•°æ®2
(1002, 'æµ‹è¯•EventTemplate_2', 'æµ‹è¯•æ•°æ®2', ..., false, ...),

-- æµ‹è¯•æ•°æ®3
(1003, 'æµ‹è¯•EventTemplate_3', 'æµ‹è¯•æ•°æ®3', ..., true, ...),

-- æµ‹è¯•æ•°æ®4
(1004, 'æµ‹è¯•EventTemplate_4', 'æµ‹è¯•æ•°æ®4', ..., false, ...)
```

#### âœ… æ•°æ®ç‰¹ç‚¹

- **4 æ¡æµ‹è¯•æ•°æ®**ï¼ˆä¸å¤šä¸å°‘ï¼Œæ»¡è¶³æµ‹è¯•éœ€æ±‚ï¼‰
- **å­—æ®µä¸°å¯Œ**ï¼šæ‰€æœ‰å­—æ®µéƒ½æœ‰å€¼
- **æ™ºèƒ½ç”Ÿæˆ**ï¼š
  - æ—¶é—´å­—æ®µï¼šåˆ†åˆ«æ˜¯ 1å¤©å‰ã€7å¤©å‰ã€30å¤©å‰ã€å½“å‰æ—¶é—´
  - Bool å­—æ®µï¼štrue/false äº¤æ›¿
  - æ•´æ•°å­—æ®µï¼šæ ¹æ®åºå·ç”Ÿæˆ
  - å­—ç¬¦ä¸²å­—æ®µï¼šæ ¹æ®å­—æ®µåç”Ÿæˆï¼ˆnameã€ipã€pathç­‰ï¼‰
- **åŒ…å«éªŒè¯ SQL**

---

### 3. Mapper æ¥å£

```java
@Mapper
public interface EventTemplateMapper {

    Object selectAllTemplate();  // TODO: æ ¹æ®å®é™…è¿”å›ç±»å‹ä¿®æ”¹
    Object truncate();  // TODO: æ ¹æ®å®é™…è¿”å›ç±»å‹ä¿®æ”¹
    int batchInsert(EventTemplate entity);
    void updateByIncidentName(EventTemplate entity);  // UPDATE æ— è¿”å›å€¼
    // ...
}
```

#### âœ… æ¥å£ç‰¹ç‚¹

- åŒ…å«æ‰€æœ‰ XML æ–¹æ³•
- SELECT è¿”å› Objectï¼ˆéœ€è¦æ ¹æ®å®é™…ä¿®æ”¹ï¼‰
- INSERT/DELETE è¿”å› int
- UPDATE è¿”å› voidï¼ˆæ— è¿”å›å€¼ï¼‰

---

### 4. å¿«é€Ÿå¼€å§‹æ–‡æ¡£

æ¯ä¸ªæµ‹è¯•å¥—ä»¶éƒ½æœ‰å®Œæ•´çš„ä½¿ç”¨è¯´æ˜ã€‚

---

## ğŸ“‹ å®Œæ•´æµ‹è¯•å¥—ä»¶åˆ—è¡¨

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

1. **AlarmOutGoingConfig** â­ (2ä¸ªæ–¹æ³•) - æ‰‹åŠ¨å®Œå–„ç‰ˆ
2. **EventTemplate** (6ä¸ªæ–¹æ³•) - äº‹ä»¶æ¨¡æ¿
3. **SecurityEvent** (31ä¸ªæ–¹æ³•) - å®‰å…¨äº‹ä»¶ï¼ˆæœ€å¤šï¼‰
4. **RiskIncident** (30ä¸ªæ–¹æ³•) - é£é™©äº‹ä»¶
5. **ProhibitHistory** (37ä¸ªæ–¹æ³•) - å°ç¦å†å²ï¼ˆæœ€å¤šï¼‰

### å‘Šè­¦ä¸é€šçŸ¥

6. **AlarmStatusTimingTask** (1ä¸ªæ–¹æ³•)
7. **EventOutGoingConfig** (1ä¸ªæ–¹æ³•)
8. **EventOutGoing** (1ä¸ªæ–¹æ³•)
9. **NoticeHistory** (5ä¸ªæ–¹æ³•)
10. **OutGoingConfig** (7ä¸ªæ–¹æ³•)

### äº‹ä»¶å¤„ç†

11. **EventScenarioQueue** (4ä¸ªæ–¹æ³•)
12. **EventUpdateCkAlarmQueue** (3ä¸ªæ–¹æ³•)
13. **QueryTemplate** (3ä¸ªæ–¹æ³•)
14. **ScenarioData** (1ä¸ªæ–¹æ³•)
15. **ScenarioTemplate** (2ä¸ªæ–¹æ³•)

### é£é™©ä¸äº‹ä»¶å¤–å‘

16. **RiskIncidentHistory** (10ä¸ªæ–¹æ³•)
17. **RiskIncidentOutGoing** (15ä¸ªæ–¹æ³•)
18. **RiskIncidentOutGoingHistory** (9ä¸ªæ–¹æ³•)

### å®‰å…¨ç­–ç•¥

19. **LinkedStrategy** (14ä¸ªæ–¹æ³•)
20. **LinkedStrategyValidtime** (3ä¸ªæ–¹æ³•)
21. **StrategyDeviceRel** (12ä¸ªæ–¹æ³•)
22. **SecurityType** (3ä¸ªæ–¹æ³•)
23. **SecurityAlarmHandle** (2ä¸ªæ–¹æ³•)

### å°å µä¸éš”ç¦»

24. **BlockHistory** (11ä¸ªæ–¹æ³•)
25. **IsolationHistory** (2ä¸ªæ–¹æ³•)
26. **KillProcessHistory** (2ä¸ªæ–¹æ³•)
27. **VirusKillHistory** (2ä¸ªæ–¹æ³•)

### æ‰«æä¸æ£€æµ‹

28. **ScanHistory** (1ä¸ªæ–¹æ³•)
29. **ScanHistoryDetail** (5ä¸ªæ–¹æ³•)
30. **AttackerTrafficTask** (1ä¸ªæ–¹æ³•)

### æƒ…æŠ¥ä¸è®¢é˜…

31. **Intelligence** (14ä¸ªæ–¹æ³•)
32. **VulAnalysisSub** (11ä¸ªæ–¹æ³•)

### å…¶ä»–åŠŸèƒ½

33. **AssetInfo** (2ä¸ªæ–¹æ³•)
34. **AttackKnowledge** (9ä¸ªæ–¹æ³•)
35. **LoginBaseline** (3ä¸ªæ–¹æ³•)
36. **SecurityZoneSync** (1ä¸ªæ–¹æ³•)
37. **SharedData** (1ä¸ªæ–¹æ³•)
38. **TagSearch** (2ä¸ªæ–¹æ³•)
39. **ThirdAuth** (1ä¸ªæ–¹æ³•)

---

## ğŸ“ ç›®å½•ç»“æ„

```
xml_tests/
â”œâ”€â”€ README.md
â”œâ”€â”€ AlarmOutGoingConfig/           â­ æ‰‹åŠ¨å®Œå–„ç‰ˆ
â”‚   â”œâ”€â”€ AlarmOutGoingConfigTestController.java
â”‚   â”œâ”€â”€ AlarmOutGoingConfigMapper.java
â”‚   â”œâ”€â”€ test_data.sql
â”‚   â””â”€â”€ å¿«é€Ÿå¼€å§‹.md
â”‚
â”œâ”€â”€ EventTemplate/                 è‡ªåŠ¨ç”Ÿæˆç‰ˆ
â”‚   â”œâ”€â”€ EventTemplateTestController.java
â”‚   â”œâ”€â”€ EventTemplateMapper.java
â”‚   â”œâ”€â”€ test_data.sql
â”‚   â””â”€â”€ å¿«é€Ÿå¼€å§‹.md
â”‚
â”œâ”€â”€ ... (å…± 39 ä¸ªç›®å½•)
```

---

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ 1ï¼šæµ‹è¯•å•ä¸ª Mapper

```bash
# 1. é€‰æ‹©è¦æµ‹è¯•çš„åŠŸèƒ½
cd xml_tests/EventTemplate

# 2. å‡†å¤‡æµ‹è¯•æ•°æ®
psql -U postgres -d xdr22 -f test_data.sql

# 3. å¤åˆ¶æ–‡ä»¶åˆ°é¡¹ç›®
cp EventTemplateTestController.java <é¡¹ç›®è·¯å¾„>/src/main/java/.../test/
cp EventTemplateMapper.java <é¡¹ç›®è·¯å¾„>/src/main/java/.../test/mapper/

# 4. æ ¹æ® TODO æ³¨é‡Šå®Œå–„æµ‹è¯•å‚æ•°

# 5. å¯åŠ¨åº”ç”¨
mvn spring-boot:run

# 6. Postman æµ‹è¯•
# GET http://localhost:8080/test/eventtemplate/
```

### æ–¹å¼ 2ï¼šæ‰¹é‡æµ‹è¯•

å°†å¤šä¸ªæµ‹è¯•å¥—ä»¶çš„æ–‡ä»¶ä¸€èµ·å¤åˆ¶åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åé€ä¸ªæµ‹è¯•ã€‚

---

## âš ï¸ é‡è¦è¯´æ˜

### 1. TODO éœ€è¦æ‰‹åŠ¨å®Œå–„

ç”Ÿæˆçš„ Controller ä¸­åŒ…å«äº†**å®Œæ•´çš„æµ‹è¯•æ•°æ®ç¤ºä¾‹**ï¼Œä½†æ˜¯ä»¥æ³¨é‡Šå½¢å¼ï¼š

```java
// TODO: æ„é€ æµ‹è¯•æ•°æ®
EventTemplate entity = new EventTemplate();
// entity.setId(1001L);           // â† å–æ¶ˆæ³¨é‡Šå¹¶æ ¹æ®å®é™…ä¿®æ”¹
// entity.setIncidentName("æµ‹è¯•"); // â† å–æ¶ˆæ³¨é‡Šå¹¶æ ¹æ®å®é™…ä¿®æ”¹
// entity.setEnable(true);        // â† å–æ¶ˆæ³¨é‡Šå¹¶æ ¹æ®å®é™…ä¿®æ”¹
```

**ä½¿ç”¨æ—¶éœ€è¦**ï¼š
1. æŸ¥çœ‹ XML æ–‡ä»¶ï¼Œäº†è§£æ–¹æ³•çš„å®é™…å‚æ•°
2. å–æ¶ˆæ³¨é‡Šéœ€è¦çš„å­—æ®µ
3. æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹å‚æ•°å€¼
4. åˆ é™¤ä¸éœ€è¦çš„å­—æ®µ

### 2. SELECT æ–¹æ³•è¿”å›ç±»å‹

```java
Object selectAllTemplate();  // TODO: æ ¹æ®å®é™…è¿”å›ç±»å‹ä¿®æ”¹
```

éœ€è¦æ ¹æ® XML ä¸­çš„ `resultType` æˆ– `resultMap` ä¿®æ”¹ä¸ºå®é™…çš„è¿”å›ç±»å‹ã€‚

### 3. å®ä½“ç±»ä»é¡¹ç›®å¼•ç”¨

**ä¸éœ€è¦åˆ›å»ºå®ä½“ç±»**ï¼Œä»é¡¹ç›®ä¸­å·²æœ‰çš„å®ä½“ç±»å¼•ç”¨å³å¯ã€‚

---

## ğŸ“Š æ•°æ®è´¨é‡å¯¹æ¯”

### AlarmOutGoingConfigï¼ˆæ‰‹åŠ¨å®Œå–„ç‰ˆï¼‰

- âœ… **Controller**: 2ä¸ªæ–¹æ³•ï¼Œ2ä¸ªæµ‹è¯•ï¼Œå‚æ•°å®Œå…¨å†™æ­»
- âœ… **test_data.sql**: 5æ¡æ•°æ®ï¼Œå­—æ®µéå¸¸ä¸°å¯Œï¼ŒåŒ…å«å¤šç§åœºæ™¯
- âœ… **Mapper**: è¯¦ç»†æ³¨é‡Šï¼Œä½¿ç”¨è¯´æ˜å®Œæ•´
- âœ… **å¿«é€Ÿå¼€å§‹**: éå¸¸è¯¦ç»†ï¼ŒåŒ…å«éªŒè¯ SQL

### å…¶ä»– 38 ä¸ªï¼ˆè‡ªåŠ¨ç”Ÿæˆç‰ˆï¼‰

- âœ… **Controller**: æ–¹æ³•æ•° = XMLæ–¹æ³•æ•°ï¼ŒåŒ…å«å®Œæ•´æµ‹è¯•æ•°æ®ç¤ºä¾‹ï¼ˆTODOå½¢å¼ï¼‰
- âœ… **test_data.sql**: 4æ¡æ•°æ®ï¼Œå­—æ®µä¸°å¯Œï¼Œæ™ºèƒ½ç”Ÿæˆ
- âœ… **Mapper**: åŸºç¡€æ³¨é‡Š
- âœ… **å¿«é€Ÿå¼€å§‹**: æ ‡å‡†æ ¼å¼

---

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

æµ‹è¯•æ¯ä¸ªå¥—ä»¶æ—¶ï¼š

### å‡†å¤‡é˜¶æ®µ

- [ ] æ‰§è¡Œ test_data.sql å‡†å¤‡æ•°æ®
- [ ] å¤åˆ¶ Controller å’Œ Mapper åˆ°é¡¹ç›®
- [ ] æ ¹æ® TODO å®Œå–„æµ‹è¯•å‚æ•°
- [ ] ä¿®æ”¹ SELECT æ–¹æ³•çš„è¿”å›ç±»å‹

### æµ‹è¯•é˜¶æ®µ

- [ ] å¯åŠ¨åº”ç”¨æ— æŠ¥é”™
- [ ] è®¿é—®æ¥å£åˆ—è¡¨ `/test/xxx/`
- [ ] é€ä¸ªæµ‹è¯•æ¯ä¸ªæ–¹æ³•
- [ ] æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—
- [ ] éªŒè¯æ•°æ®åº“æ•°æ®

### éªŒè¯é˜¶æ®µ

- [ ] SQL è¯­æ³•æ­£ç¡®
- [ ] Bool å­—æ®µä½¿ç”¨ true/false
- [ ] æ—¶é—´å­—æ®µæ ¼å¼æ­£ç¡®
- [ ] UPDATE æ— è¿”å›å€¼æ­£å¸¸å·¥ä½œ
- [ ] ç‰¹æ®Š SQL å‡½æ•°ï¼ˆSTRING_AGGã€EXTRACTç­‰ï¼‰æ­£å¸¸

---

## ğŸŠ æ€»ç»“

### âœ… å®Œæˆæƒ…å†µ

- [x] ç”Ÿæˆ 39 ä¸ªæµ‹è¯•å¥—ä»¶
- [x] æ¯ä¸ªå¥—ä»¶åŒ…å« 4 ä¸ªæ–‡ä»¶
- [x] Controller åŒ…å«å®Œæ•´æµ‹è¯•æ•°æ®ç¤ºä¾‹
- [x] test_data.sql æ•°æ®é€‚ä¸­ä¸”ä¸°å¯Œ
- [x] æ‰€æœ‰æ–‡ä»¶ç¬¦åˆè§„èŒƒ

### ğŸ“ˆ ä¼˜åŠ¿

1. **è§„èŒƒç»Ÿä¸€** - æ‰€æœ‰æµ‹è¯•å¥—ä»¶æ ¼å¼ä¸€è‡´
2. **å¿«é€Ÿæµ‹è¯•** - GET è¯·æ±‚ï¼Œå‚æ•°å†™æ­»
3. **æ•°æ®ä¸°å¯Œ** - 4æ¡æµ‹è¯•æ•°æ®ï¼Œå­—æ®µå®Œæ•´
4. **æ˜“äºä½¿ç”¨** - åŒ…å«å®Œæ•´ä½¿ç”¨è¯´æ˜
5. **çµæ´»è°ƒæ•´** - TODO æ³¨é‡Šæ¸…æ™°ï¼Œæ˜“äºä¿®æ”¹

### ğŸš€ ä¸‹ä¸€æ­¥

1. é€‰æ‹©è¦æµ‹è¯•çš„ Mapper
2. å‡†å¤‡æµ‹è¯•æ•°æ®
3. æ ¹æ® TODO å®Œå–„å‚æ•°
4. å¯åŠ¨åº”ç”¨æµ‹è¯•
5. éªŒè¯æ‰€æœ‰ SQL è½¬æ¢æ­£ç¡®

**ç°åœ¨å¯ä»¥å¼€å§‹æµ‹è¯•æ‰€æœ‰ XML æ–‡ä»¶çš„ PostgreSQL è½¬æ¢ç»“æœäº†ï¼** ğŸ¯
