<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dbapp.extension.xdr.threatMonitor.mapper.AlarmStatusTimingTaskMapper">

    <insert id="insertOrUpdate" parameterType="com.dbapp.extension.xdr.threatMonitor.entity.AlarmStatusTimingTask">
        INSERT INTO t_alarm_status_timing_task (task_type,alarm_status,remarks,operator,"condition",create_time,task_end_time,associated_field)
        values (#{task.taskType,jdbcType=VARCHAR},#{task.alarmStatus,jdbcType=VARCHAR},#{task.remarks,jdbcType=VARCHAR},#{task.operator,jdbcType=VARCHAR},#{task.condition,jdbcType=VARCHAR},
        CAST(#{task.createTime} AS timestamp),CAST(#{task.taskEndTime} AS timestamp),#{task.associatedField,jdbcType=VARCHAR})
        ON CONFLICT (id) DO UPDATE SET
        task_type = EXCLUDED.task_type ,alarm_status = EXCLUDED.alarm_status,remarks = EXCLUDED.remarks ,operator = EXCLUDED.operator, "condition" = EXCLUDED."condition"
    </insert>
    <!-- 注意: ON CONFLICT需要指定实际的唯一约束列，这里假设为(id)，请根据实际表结构调整 -->
</mapper>
