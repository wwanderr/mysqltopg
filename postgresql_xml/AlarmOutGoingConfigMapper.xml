<?xml version="1.0" encoding="UTF-8" ?>
<!--
    自动转换说明：
    - 原文件: AlarmOutGoingConfigMapper.xml
    - 转换时间: 2026-01-19 11:04:29
    - MySQL → PostgreSQL 16.x
    
    注意事项：
    1. ON CONFLICT子句可能需要手动指定冲突列
    2. LIKE已保留，如需不区分大小写请改为ILIKE
    3. 建议人工review后再部署到生产环境
-->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/dtd">
<mapper namespace="com.dbapp.extension.xdr.outgoingData.mapper.AlarmOutGoingConfigMapper">

    <update id="delById" parameterType="com.dbapp.extension.xdr.outgoingData.po.AlarmOutGoingConfig">
        UPDATE t_alarm_out_going_config SET IS_DEL = 1 WHERE id = #{alarmOutGoingConfig.id}
    </update>


    <update id="updateSendStatus">
        UPDATE t_alarm_out_going_config
        SET last_send_time = CURRENT_TIMESTAMP,
        send_count = send_count + 1,
        last_send_result = #{alarmOutGoingConfig.lastSendResult},
        cause_of_failure = #{alarmOutGoingConfig.causeOfFailure}
        <if test="'成功' == alarmOutGoingConfig.lastSendResult">
            ,succeed_count = succeed_count +1
        </if>
        WHERE id = #{alarmOutGoingConfig.id}
    </update>
</mapper>
