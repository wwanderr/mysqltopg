# æ‰¹é‡ä¿®å¤æ ‡å‡†æ¨¡æ¿

**é€‚ç”¨èŒƒå›´**: å‰©ä½™35ä¸ªæµ‹è¯•æ¨¡å—  
**æ›´æ–°æ—¶é—´**: 2026-01-28

---

## ğŸ“‹ ä¿®å¤æ ‡å‡†

### 1. åŸºæœ¬åŸåˆ™
- âœ… **ä¸€ä¸ªXMLæ–¹æ³• = ä¸€ä¸ªæµ‹è¯•æ–¹æ³•**
- âœ… **æ‰€æœ‰æŸ¥è¯¢å‚æ•°åœ¨ä¸€ä¸ªæ–¹æ³•å†…æµ‹è¯•**
- âœ… **æ‰€æœ‰æ–¹æ³•åŒ…å«try-catchå¼‚å¸¸å¤„ç†**
- âœ… **ç®€æ´çš„ä¿®å¤æŠ¥å‘Š**

### 2. æµ‹è¯•æ–¹æ³•å‘½å
```java
// æ¨èæ ¼å¼
@GetMapping("/{xmlMethodName}")
public String test{XmlMethodName}() {
    try {
        // æµ‹è¯•é€»è¾‘
    } catch (Exception e) {
        return "ERROR: " + e.getMessage();
    }
}
```

### 3. å¤æ‚æŸ¥è¯¢å‚æ•°æµ‹è¯•
å¯¹äºåŒ…å«å¤šä¸ª`<if>`æ¡ä»¶çš„æŸ¥è¯¢æ–¹æ³•ï¼š
```java
@GetMapping("/complexQuery")
public String testComplexQuery() {
    try {
        Param param = new Param();
        // è®¾ç½®æ‰€æœ‰å¯èƒ½çš„å‚æ•°
        param.setField1("value1");
        param.setField2("value2");
        param.setStartTime("2026-01-01 00:00:00");
        param.setEndTime("2026-12-31 23:59:59");
        param.setLimit(10);
        param.setOffset(0);
        
        List<Result> result = mapper.complexQuery(param);
        return "SUCCESS: " + result.size();
    } catch (Exception e) {
        return "ERROR: " + e.getMessage();
    }
}
```

### 4. foreachæ‰¹é‡æ“ä½œæµ‹è¯•
```java
@GetMapping("/batchInsert")
public String testBatchInsert() {
    try {
        List<Entity> list = new ArrayList<>();
        // æ·»åŠ 2-3æ¡æµ‹è¯•æ•°æ®
        Entity e1 = new Entity();
        e1.setField1("test1");
        list.add(e1);
        
        int rows = mapper.batchInsert(list);
        return "SUCCESS: " + rows;
    } catch (Exception e) {
        return "ERROR: " + e.getMessage();
    }
}
```

### 5. choose/whenåˆ†æ”¯æµ‹è¯•
å¯¹äºåŒ…å«`<choose>`çš„æ–¹æ³•ï¼Œç¡®ä¿æµ‹è¯•ä¸åŒåˆ†æ”¯ï¼š
```java
// æµ‹è¯•whenåˆ†æ”¯
String orderByStr = "field1 desc";
result = mapper.query(orderByStr, param);

// æµ‹è¯•é»˜è®¤otherwiseåˆ†æ”¯
result = mapper.query(null, param);
```

---

## ğŸ“Š å·²å®Œæˆæ¨¡å—å‚è€ƒ

### LinkedStrategyï¼ˆ14æ–¹æ³•ï¼Œå¤æ‚æŸ¥è¯¢æ¨¡æ¿ï¼‰
- âœ… `getLinkStrategyList`: 8ä¸ªå‚æ•°ï¼ˆsource, linkDeviceType, linkDeviceIp, action, startTime, endTime, limit, offsetï¼‰
- âœ… å…³è”è¡¨æ•°æ®ï¼št_strategy_device_rel

### ProhibitHistoryï¼ˆ37æ–¹æ³•ï¼Œå¤§æ¨¡å—æ¨¡æ¿ï¼‰
- âœ… `getProhibitListByCondition`: 14ä¸ªå‚æ•°
- âœ… SQLç‰‡æ®µå¤ç”¨ã€UNION ALL

### NoticeHistoryï¼ˆ5æ–¹æ³•ï¼Œchooseåˆ†æ”¯æ¨¡æ¿ï¼‰
- âœ… `getNoticeHistory`: chooseåˆ†æ”¯æµ‹è¯•ï¼ˆé»˜è®¤æ’åº/è‡ªå®šä¹‰æ’åºï¼‰

---

## ğŸ”§ å¿«é€Ÿä¿®å¤æ£€æŸ¥æ¸…å•

å¯¹äºæ¯ä¸ªæ¨¡å—ï¼Œç¡®ä¿ï¼š

### æ­¥éª¤1ï¼šæ£€æŸ¥XML Mapper
```bash
# ç»Ÿè®¡æ–¹æ³•æ•°
grep -c "select id=\|insert id=\|update id=\|delete id=" XXXMapper.xml
```

### æ­¥éª¤2ï¼šç¡®è®¤æµ‹è¯•æ–¹æ³•æ•°é‡
```java
// TestController.javaä¸­çš„@GetMappingæ•°é‡åº”ç­‰äºXMLæ–¹æ³•æ•°
```

### æ­¥éª¤3ï¼šå¤æ‚æŸ¥è¯¢å‚æ•°æ£€æŸ¥
- [ ] æ‰€æœ‰`<if>`æ¡ä»¶çš„å‚æ•°éƒ½æœ‰è®¾ç½®
- [ ] `<foreach>`çš„é›†åˆå‚æ•°æœ‰æµ‹è¯•æ•°æ®
- [ ] `<choose>`çš„ä¸åŒåˆ†æ”¯éƒ½æœ‰è¦†ç›–

### æ­¥éª¤4ï¼šå…³è”è¡¨æ•°æ®
- [ ] æ£€æŸ¥æ˜¯å¦æœ‰LEFT JOIN/RIGHT JOIN
- [ ] test_data.sqlä¸­æ˜¯å¦åŒ…å«å…³è”è¡¨æ•°æ®

---

## ğŸ“ ä¿®å¤æŠ¥å‘Šæ¨¡æ¿

```markdown
# {ModuleName} ä¿®å¤æŠ¥å‘Š

**æ—¶é—´**: 2026-01-28  
**çŠ¶æ€**: âœ… å®Œæˆ

## ä¿®å¤å†…å®¹
- âœ… Xä¸ªæµ‹è¯•æ–¹æ³•ï¼Œå¯¹åº”Xä¸ªXMLæ–¹æ³•
- âœ… é‡ç‚¹æ–¹æ³•æµ‹è¯•æ‰€æœ‰å‚æ•°
- âœ… æ‰€æœ‰æ–¹æ³•åŒ…å«å¼‚å¸¸å¤„ç†

## æµ‹è¯•æ–¹æ³•

| æ–¹æ³• | å‚æ•°æ•°é‡ | è¯´æ˜ |
|-----|---------|------|
| method1 | 5ä¸ª | å¤æ‚æŸ¥è¯¢ |
| method2 | - | æ‰¹é‡æ’å…¥ |

## ä½¿ç”¨è¯´æ˜

\```bash
curl http://localhost:8080/test/{moduleName}/method1
\```
```

---

## ğŸš€ æ‰¹é‡ä¿®å¤ç­–ç•¥

### ä¼˜å…ˆçº§1ï¼šå¤æ‚æŸ¥è¯¢æ¨¡å—ï¼ˆ10+å‚æ•°ï¼‰
å¤„ç†æ–¹å¼ï¼šè¯¦ç»†æµ‹è¯•æ¯ä¸ªå‚æ•°

### ä¼˜å…ˆçº§2ï¼šä¸­ç­‰æ¨¡å—ï¼ˆ5-10æ–¹æ³•ï¼‰
å¤„ç†æ–¹å¼ï¼šæ ‡å‡†æ¨¡æ¿ï¼Œé‡ç‚¹æ–¹æ³•è¯¦ç»†æµ‹è¯•

### ä¼˜å…ˆçº§3ï¼šç®€å•æ¨¡å—ï¼ˆ<5æ–¹æ³•ï¼‰
å¤„ç†æ–¹å¼ï¼šå¿«é€Ÿå¥—ç”¨æ¨¡æ¿

---

## âœ… è‡ªæ£€éªŒè¯

ä¿®å¤å®Œæˆåï¼Œæ¯ä¸ªæ¨¡å—åº”æ»¡è¶³ï¼š
1. âœ… TestControllerä¸­æ–¹æ³•æ•° = XML Mapperä¸­æ–¹æ³•æ•°
2. âœ… å¤æ‚æŸ¥è¯¢æ–¹æ³•çš„æ‰€æœ‰å‚æ•°éƒ½æœ‰è®¾ç½®
3. âœ… æ‰€æœ‰æ–¹æ³•æœ‰å¼‚å¸¸å¤„ç†
4. âœ… æœ‰ç®€æ´çš„ä¿®å¤æŠ¥å‘Š

---

**ä½¿ç”¨æ­¤æ¨¡æ¿å¯ç¡®ä¿35ä¸ªæ¨¡å—çš„ä¿®å¤è´¨é‡ç»Ÿä¸€ã€é«˜æ•ˆï¼**
